<html>
<head><title>Function Summary</title>
<style>body { font-size: 80%; font-family: sans-serif; } h2 { color: #339; } pre { font-size: 1.2em; } </style></head>
<body>
<h1>http.c</h1>
<h2>void HTTPi_Response::__construct(bool cache, bool gzip)</h2>
<p></p>
<h2>bool HTTPi_Response::setCache(bool cache)</h2>
<p></p>
<h2>bool HTTPi_Response::getCache()</h2>
<p></p>
<h2>bool HTTPi_Response::setGzip(bool gzip)</h2>
<p></p>
<h2>bool HTTPi_Response::getGzip()</h2>
<p></p>
<h2>bool HTTPi_Response::setCacheControl(string control[, bool raw = false])</h2>
<p></p>
<h2>string HTTPi_Response::getCacheControl()</h2>
<p></p>
<h2>bool HTTPi::setContentType(string content_type)</h2>
<p></p>
<h2>string HTTPi_Response::getContentType()</h2>
<p></p>
<h2>bool HTTPi_Response::setContentDisposition(string filename[, bool inline = false])</h2>
<p></p>
<h2>array HTTPi_Response::getContentDisposition()</h2>
<p></p>
<h2>bool HTTPi_Response::setETag(string etag)</h2>
<p></p>
<h2>string HTTPi_Response::getETag()</h2>
<p></p>
<h2>bool HTTPi_Response::setData(string data)</h2>
<p></p>
<h2>string HTTPi_Response::getData()</h2>
<p></p>
<h2>bool HTTPi_Response::setStream(resource stream)</h2>
<p></p>
<h2>resource HTTPi_Response::getStream()</h2>
<p></p>
<h2>bool HTTPi_Response::setFile(string file)</h2>
<p></p>
<h2>string HTTPi_Response::getFile()</h2>
<p></p>
<h2>int HTTPi_Response::getSize()</h2>
<p></p>
<h2>string http_date([int timestamp])</h2>
<p>This function returns a valid HTTP date regarding RFC 822/1123
looking like: "Wed, 22 Dec 2004 11:34:47 GMT"</p>
<h2>string http_absolute_uri(string url[, string proto])</h2>
<p>This function returns an absolute URI constructed from url.
If the url is already abolute but a different proto was supplied,
only the proto part of the URI will be updated.  If url has no
path specified, the path of the current REQUEST_URI will be taken.
The host will be taken either from the Host HTTP header of the client
the SERVER_NAME or just localhost if prior are not available.</p><p>Some examples:
<pre>
url = "page.php"                    => http://www.example.com/current/path/page.php
url = "/page.php"                   => http://www.example.com/page.php
url = "/page.php", proto = "https"  => https://www.example.com/page.php
</pre></p>
<h2>string http_negotiate_language(array supported[, string default = 'en-US'])</h2>
<p>This function negotiates the clients preferred language based on its
Accept-Language HTTP header.  It returns the negotiated language or
the default language if none match.</p><p>The qualifier is recognized and languages without qualifier are rated highest.</p><p>The supported parameter is expected to be an array having
the supported languages as array values.</p><p>Example:
<pre>
<code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />$langs </span><span style="color: #007700">= array(<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'en-US'</span><span style="color: #007700">,</span><span style="color: #FF8000">// default<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'fr'</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'fr-FR'</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'de'</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'de-DE'</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'de-AT'</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'de-CH'</span><span style="color: #007700">,<br />);<br />include </span><span style="color: #DD0000">'./langs/'</span><span style="color: #007700">. </span><span style="color: #0000BB">http_negotiate_language</span><span style="color: #007700">(</span><span style="color: #0000BB">$langs</span><span style="color: #007700">) .</span><span style="color: #DD0000">'.php'</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code>
</pre></p>
<h2>string http_negotiate_charset(array supported[, string default = 'iso-8859-1'])</h2>
<p>This function negotiates the clients preferred charset based on its
Accept-Charset HTTP header.  It returns the negotiated charset or
the default charset if none match.</p><p>The qualifier is recognized and charset without qualifier are rated highest.</p><p>The supported parameter is expected to be an array having
the supported charsets as array values.</p><p>Example:
<pre>
<code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />$charsets </span><span style="color: #007700">= array(<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'iso-8859-1'</span><span style="color: #007700">, </span><span style="color: #FF8000">// default<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'iso-8859-2'</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'iso-8859-15'</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'utf-8'<br /></span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$pref </span><span style="color: #007700">= </span><span style="color: #0000BB">http_negotiate_charset</span><span style="color: #007700">(</span><span style="color: #0000BB">$charsets</span><span style="color: #007700">);<br />if (!</span><span style="color: #0000BB">strcmp</span><span style="color: #007700">(</span><span style="color: #0000BB">$pref</span><span style="color: #007700">, </span><span style="color: #DD0000">'iso-8859-1'</span><span style="color: #007700">)) {<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">iconv_set_encoding</span><span style="color: #007700">(</span><span style="color: #DD0000">'internal_encoding'</span><span style="color: #007700">, </span><span style="color: #DD0000">'iso-8859-1'</span><span style="color: #007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">iconv_set_encoding</span><span style="color: #007700">(</span><span style="color: #DD0000">'output_encoding'</span><span style="color: #007700">, </span><span style="color: #0000BB">$pref</span><span style="color: #007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">ob_start</span><span style="color: #007700">(</span><span style="color: #DD0000">'ob_iconv_handler'</span><span style="color: #007700">);<br />}<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code>
</pre></p>
<h2>bool http_send_status(int status)</h2>
<p>Send HTTP status code.</p>
<h2>bool http_send_last_modified([int timestamp])</h2>
<p>This converts the given timestamp to a valid HTTP date and
sends it as "Last-Modified" HTTP header.  If timestamp is
omitted, current time is sent.</p>
<h2>bool http_match_modified([int timestamp])</h2>
<p>Matches the given timestamp against the clients "If-Modified-Since" resp.
"If-Unmodified-Since" HTTP headers.</p>
<h2>bool http_match_etag(string etag)</h2>
<p>This matches the given ETag against the clients
"If-Match" resp. "If-None-Match" HTTP headers.</p>
<h2>bool http_cache_last_modified([int timestamp_or_expires]])</h2>
<p>If timestamp_or_exires is greater than 0, it is handled as timestamp
and will be sent as date of last modification.  If it is 0 or omitted,
the current time will be sent as Last-Modified date.  If it's negative,
it is handled as expiration time in seconds, which means that if the
requested last modification date is not between the calculated timespan,
the Last-Modified header is updated and the actual body will be sent.</p>
<h2>bool http_cache_etag([string etag])</h2>
<p>This function attempts to cache the HTTP body based on an ETag,
either supplied or generated through calculation of the MD5
checksum of the output (uses output buffering).</p><p>If clients "If-None-Match" header matches the supplied/calculated
ETag, the body is considered cached on the clients side and
a "304 Not Modified" status code is issued.</p>
<h2>string ob_httpetaghandler(string data, int mode)</h2>
<p>For use with ob_start().
Note that this has to be started as first output buffer.
WARNING: Don't use with http_send_*().</p>
<h2>void http_redirect([string url[, array params[, bool session,[ bool permanent]]]])</h2>
<p>Redirect to a given url.
The supplied url will be expanded with http_absolute_uri(), the params array will
be treated with http_build_query() and the session identification will be appended
if session is true.</p><p>Depending on permanent the redirection will be issued with a permanent
("301 Moved Permanently") or a temporary ("302 Found") redirection
status code.</p><p>To be RFC compliant, "Redirecting to <a>URI</a>." will be displayed,
if the client doesn't redirect immediatly.</p>
<h2>bool http_send_data(string data)</h2>
<p>Sends raw data with support for (multiple) range requests.</p>
<h2>bool http_send_file(string file)</h2>
<p>Sends a file with support for (multiple) range requests.</p>
<h2>bool http_send_stream(resource stream)</h2>
<p>Sends an already opened stream with support for (multiple) range requests.</p>
<h2>bool http_content_type([string content_type = 'application/x-octetstream'])</h2>
<p>Sets the content type.</p>
<h2>bool http_content_disposition(string filename[, bool inline = false])</h2>
<p>Set the Content Disposition.  The Content-Disposition header is very useful
if the data actually sent came from a file or something similar, that should
be "saved" by the client/user (i.e. by browsers "Save as..." popup window).</p>
<h2>string http_chunked_decode(string encoded)</h2>
<p>This function decodes a string that was HTTP-chunked encoded.
Returns false on failure.</p>
<h2>array http_split_response(string http_response)</h2>
<p>This function splits an HTTP response into an array with headers and the
content body. The returned array may look simliar to the following example:</p><p><pre>
<code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #007700">array(<br /></span><span style="color: #0000BB">0 </span><span style="color: #007700">=&gt; array(<br /></span><span style="color: #DD0000">'Status' </span><span style="color: #007700">=&gt; </span><span style="color: #DD0000">'200 Ok'</span><span style="color: #007700">,<br /></span><span style="color: #DD0000">'Content-Type' </span><span style="color: #007700">=&gt; </span><span style="color: #DD0000">'text/plain'</span><span style="color: #007700">,<br /></span><span style="color: #DD0000">'Content-Language' </span><span style="color: #007700">=&gt; </span><span style="color: #DD0000">'en-US'<br /></span><span style="color: #007700">),<br /></span><span style="color: #0000BB">1 </span><span style="color: #007700">=&gt; </span><span style="color: #DD0000">"Hello World!\"<br />);<br />?&gt;</span>
</span>
</code>
</pre></p>
<h2>array http_parse_headers(string header)</h2>
<p></p>
<h2>array http_get_request_headers(void)</h2>
<p></p>
<h2>string http_get(string url[, array options[, array &info]])</h2>
<p>Performs an HTTP GET request on the supplied url.</p><p>The second parameter is expected to be an associative
array where the following keys will be recognized:
<pre>
- redirect:         int, whether and how many redirects to follow
- unrestrictedauth: bool, whether to continue sending credentials on
redirects to a different host
- proxyhost:        string, proxy host in "host[:port]" format
- proxyport:        int, use another proxy port as specified in proxyhost
- proxyauth:        string, proxy credentials in "user:pass" format
- proxyauthtype:    int, HTTP_AUTH_BASIC and/or HTTP_AUTH_NTLM
- httpauth:         string, http credentials in "user:pass" format
- httpauthtype:     int, HTTP_AUTH_BASIC, DIGEST and/or NTLM
- compress:         bool, whether to allow gzip/deflate content encoding
(defaults to true)
- port:             int, use another port as specified in the url
- referer:          string, the referer to sends
- useragent:        string, the user agent to send
(defaults to PECL::HTTP/version (PHP/version)))
- headers:          array, list of custom headers as associative array
like array("header" => "value")
- cookies:          array, list of cookies as associative array
like array("cookie" => "value")
- cookiestore:      string, path to a file where cookies are/will be stored
</pre></p><p>The optional third parameter will be filled with some additional information
in form af an associative array, if supplied, like the following example:
<pre>
<code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #007700">array (<br /></span><span style="color: #DD0000">'effective_url' </span><span style="color: #007700">=&gt; </span><span style="color: #DD0000">'http://localhost'</span><span style="color: #007700">,<br /></span><span style="color: #DD0000">'response_code' </span><span style="color: #007700">=&gt; </span><span style="color: #0000BB">403</span><span style="color: #007700">,<br /></span><span style="color: #DD0000">'total_time' </span><span style="color: #007700">=&gt; </span><span style="color: #0000BB">0.017</span><span style="color: #007700">,<br /></span><span style="color: #DD0000">'namelookup_time' </span><span style="color: #007700">=&gt; </span><span style="color: #0000BB">0.013</span><span style="color: #007700">,<br /></span><span style="color: #DD0000">'connect_time' </span><span style="color: #007700">=&gt; </span><span style="color: #0000BB">0.014</span><span style="color: #007700">,<br /></span><span style="color: #DD0000">'pretransfer_time' </span><span style="color: #007700">=&gt; </span><span style="color: #0000BB">0.014</span><span style="color: #007700">,<br /></span><span style="color: #DD0000">'size_upload' </span><span style="color: #007700">=&gt; </span><span style="color: #0000BB">0</span><span style="color: #007700">,<br /></span><span style="color: #DD0000">'size_download' </span><span style="color: #007700">=&gt; </span><span style="color: #0000BB">202</span><span style="color: #007700">,<br /></span><span style="color: #DD0000">'speed_download' </span><span style="color: #007700">=&gt; </span><span style="color: #0000BB">11882</span><span style="color: #007700">,<br /></span><span style="color: #DD0000">'speed_upload' </span><span style="color: #007700">=&gt; </span><span style="color: #0000BB">0</span><span style="color: #007700">,<br /></span><span style="color: #DD0000">'header_size' </span><span style="color: #007700">=&gt; </span><span style="color: #0000BB">145</span><span style="color: #007700">,<br /></span><span style="color: #DD0000">'request_size' </span><span style="color: #007700">=&gt; </span><span style="color: #0000BB">62</span><span style="color: #007700">,<br /></span><span style="color: #DD0000">'ssl_verifyresult' </span><span style="color: #007700">=&gt; </span><span style="color: #0000BB">0</span><span style="color: #007700">,<br /></span><span style="color: #DD0000">'filetime' </span><span style="color: #007700">=&gt; -</span><span style="color: #0000BB">1</span><span style="color: #007700">,<br /></span><span style="color: #DD0000">'content_length_download' </span><span style="color: #007700">=&gt; </span><span style="color: #0000BB">202</span><span style="color: #007700">,<br /></span><span style="color: #DD0000">'content_length_upload' </span><span style="color: #007700">=&gt; </span><span style="color: #0000BB">0</span><span style="color: #007700">,<br /></span><span style="color: #DD0000">'starttransfer_time' </span><span style="color: #007700">=&gt; </span><span style="color: #0000BB">0.017</span><span style="color: #007700">,<br /></span><span style="color: #DD0000">'content_type' </span><span style="color: #007700">=&gt; </span><span style="color: #DD0000">'text/html; charset=iso-8859-1'</span><span style="color: #007700">,<br /></span><span style="color: #DD0000">'redirect_time' </span><span style="color: #007700">=&gt; </span><span style="color: #0000BB">0</span><span style="color: #007700">,<br /></span><span style="color: #DD0000">'redirect_count' </span><span style="color: #007700">=&gt; </span><span style="color: #0000BB">0</span><span style="color: #007700">,<br /></span><span style="color: #DD0000">'private' </span><span style="color: #007700">=&gt; </span><span style="color: #DD0000">''</span><span style="color: #007700">,<br /></span><span style="color: #DD0000">'http_connectcode' </span><span style="color: #007700">=&gt; </span><span style="color: #0000BB">0</span><span style="color: #007700">,<br /></span><span style="color: #DD0000">'httpauth_avail' </span><span style="color: #007700">=&gt; </span><span style="color: #0000BB">0</span><span style="color: #007700">,<br /></span><span style="color: #DD0000">'proxyauth_avail' </span><span style="color: #007700">=&gt; </span><span style="color: #0000BB">0</span><span style="color: #007700">,<br />)<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code>
</pre></p>
<h2>string http_head(string url[, array options[, array &info]])</h2>
<p>Performs an HTTP HEAD request on the suppied url.
Returns the HTTP response as string.
See http_get() for a full list of available options.</p>
<h2>string http_post_data(string url, string data[, array options[, &info]])</h2>
<p>Performs an HTTP POST request, posting data.
Returns the HTTP response as string.
See http_get() for a full list of available options.</p>
<h2>string http_post_array(string url, array data[, array options[, array &info]])</h2>
<p>Performs an HTTP POST request, posting www-form-urlencoded array data.
Returns the HTTP response as string.
See http_get() for a full list of available options.</p>
<h2>bool http_auth_basic(string user, string pass[, string realm = "Restricted"])</h2>
<p>Example:
<pre>
<code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #007700">if (!</span><span style="color: #0000BB">http_auth_basic</span><span style="color: #007700">(</span><span style="color: #DD0000">'mike'</span><span style="color: #007700">, </span><span style="color: #DD0000">'s3c|r3t'</span><span style="color: #007700">)) {<br />die(</span><span style="color: #DD0000">'&lt;h1&gt;Authorization failed!&lt;/h1&gt;'</span><span style="color: #007700">);<br />}<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code>
</pre></p>
<h2>bool http_auth_basic_cb(mixed callback[, string realm = "Restricted"])</h2>
<p>Example:
<pre>
<code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #007700">function </span><span style="color: #0000BB">auth_cb</span><span style="color: #007700">(</span><span style="color: #0000BB">$user</span><span style="color: #007700">, </span><span style="color: #0000BB">$pass</span><span style="color: #007700">)<br />{<br />global </span><span style="color: #0000BB">$db</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$query </span><span style="color: #007700">= </span><span style="color: #DD0000">'SELECT pass FROM users WHERE user='</span><span style="color: #007700">. </span><span style="color: #0000BB">$db</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">quoteSmart</span><span style="color: #007700">(</span><span style="color: #0000BB">$user</span><span style="color: #007700">);<br />if (</span><span style="color: #0000BB">strlen</span><span style="color: #007700">(</span><span style="color: #0000BB">$realpass </span><span style="color: #007700">= </span><span style="color: #0000BB">$db</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getOne</span><span style="color: #007700">(</span><span style="color: #0000BB">$query</span><span style="color: #007700">)) {<br />return </span><span style="color: #0000BB">$pass </span><span style="color: #007700">=== </span><span style="color: #0000BB">$realpass</span><span style="color: #007700">;<br />}<br />return </span><span style="color: #0000BB">false</span><span style="color: #007700">;<br />}<br /><br />if (!</span><span style="color: #0000BB">http_auth_basic_cb</span><span style="color: #007700">(</span><span style="color: #DD0000">'auth_cb'</span><span style="color: #007700">)) {<br />die(</span><span style="color: #DD0000">'&lt;h1&gt;Authorization failed&lt;/h1&gt;'</span><span style="color: #007700">);<br />}<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code>
</pre></p>
<hr noshade><p><b> Generated at: Thu, 17 Feb 2005 22:42:18 +0100</b></p>
</body>
</html>
