<html>
<head>
    <title>Function Summary of ext/http</title>
    <style>
        body { 
            font-size: 80%; 
            font-family: sans-serif; 
        } 
        h2, h3 { 
            color: #339; 
            clear: both;
            font-size: 1.2em;
            background: #ffc;
            padding: .2em;
        } 
        h2.o {
            color: #66b; 
            clear: both;
            font-size: 1.3em;
            background: #f0f0f0;
            padding: .2em;
        }
        p { 
            margin-left: 1em;
        } 
        pre { 
            font-size: 1.2em; 
        } 
        br { 
            display: none; 
        } 
        blockquote {
            margin-bottom: 3em;
            border: 1px solid #ccc;
            background: #f0f0f0;
            padding: 0em 1em;
            width: auto;
            float: left;
        }
        p, pre {
            clear: both;
        }
        p br, pre code br { 
            display: block; 
        } 
    </style>
</head>
<body><h1>http_functions.c</h1>
<h2 id="http_date">string http_date([int timestamp])</h2>
<p>This function returns a valid HTTP date regarding RFC 822/1123<br />
looking like: "Wed, 22 Dec 2004 11:34:47 GMT"</p>
<h2 id="http_absolute_uri">string http_absolute_uri(string url[, string proto[, string host[, int port]]])</h2>
<p>This function returns an absolute URI constructed from url.<br />
If the url is already abolute but a different proto was supplied,<br />
only the proto part of the URI will be updated.  If url has no<br />
path specified, the path of the current REQUEST_URI will be taken.<br />
The host will be taken either from the Host HTTP header of the client<br />
the SERVER_NAME or just localhost if prior are not available.<br />
<br />
Some examples:</p><pre> url = "page.php"                    => http://www.example.com/current/path/page.php<br />
 url = "/page.php"                   => http://www.example.com/page.php<br />
 url = "/page.php", proto = "https"  => https://www.example.com/page.php<br />
</pre></p>
<h2 id="http_negotiate_language">string http_negotiate_language(array supported[, string default = 'en-US'])</h2>
<p>This function negotiates the clients preferred language based on its<br />
Accept-Language HTTP header.  It returns the negotiated language or<br />
the default language if none match.<br />
<br />
The qualifier is recognized and languages without qualifier are rated highest.<br />
<br />
The supported parameter is expected to be an array having<br />
the supported languages as array values.<br />
<br />
Example:</p><pre><blockquote><code><span style="color: #000000"><br />
<span style="color: #0000BB">&lt;?php<br />$langs </span><span style="color: #007700">= array(<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'en-US'</span><span style="color: #007700">,</span><span style="color: #FF8000">// default<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'fr'</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'fr-FR'</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'de'</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'de-DE'</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'de-AT'</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'de-CH'</span><span style="color: #007700">,<br />);<br />include </span><span style="color: #DD0000">'./langs/'</span><span style="color: #007700">. </span><span style="color: #0000BB">http_negotiate_language</span><span style="color: #007700">(</span><span style="color: #0000BB">$langs</span><span style="color: #007700">) .</span><span style="color: #DD0000">'.php'</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">?&gt;</span><br />
</span><br />
</code></blockquote><br />
<br />
</pre></p>
<h2 id="http_negotiate_charset">string http_negotiate_charset(array supported[, string default = 'iso-8859-1'])</h2>
<p>This function negotiates the clients preferred charset based on its<br />
Accept-Charset HTTP header.  It returns the negotiated charset or<br />
the default charset if none match.<br />
<br />
The qualifier is recognized and charset without qualifier are rated highest.<br />
<br />
The supported parameter is expected to be an array having<br />
the supported charsets as array values.<br />
<br />
Example:</p><pre><blockquote><code><span style="color: #000000"><br />
<span style="color: #0000BB">&lt;?php<br />$charsets </span><span style="color: #007700">= array(<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'iso-8859-1'</span><span style="color: #007700">, </span><span style="color: #FF8000">// default<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'iso-8859-2'</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'iso-8859-15'</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'utf-8'<br /></span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$pref </span><span style="color: #007700">= </span><span style="color: #0000BB">http_negotiate_charset</span><span style="color: #007700">(</span><span style="color: #0000BB">$charsets</span><span style="color: #007700">);<br />if (!</span><span style="color: #0000BB">strcmp</span><span style="color: #007700">(</span><span style="color: #0000BB">$pref</span><span style="color: #007700">, </span><span style="color: #DD0000">'iso-8859-1'</span><span style="color: #007700">)) {<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">iconv_set_encoding</span><span style="color: #007700">(</span><span style="color: #DD0000">'internal_encoding'</span><span style="color: #007700">, </span><span style="color: #DD0000">'iso-8859-1'</span><span style="color: #007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">iconv_set_encoding</span><span style="color: #007700">(</span><span style="color: #DD0000">'output_encoding'</span><span style="color: #007700">, </span><span style="color: #0000BB">$pref</span><span style="color: #007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">ob_start</span><span style="color: #007700">(</span><span style="color: #DD0000">'ob_iconv_handler'</span><span style="color: #007700">);<br />}<br /></span><span style="color: #0000BB">?&gt;</span><br />
</span><br />
</code></blockquote><br />
<br />
</pre></p>
<h2 id="http_send_status">bool http_send_status(int status)</h2>
<p>Send HTTP status code.</p>
<h2 id="http_send_last_modified">bool http_send_last_modified([int timestamp])</h2>
<p>This converts the given timestamp to a valid HTTP date and<br />
sends it as "Last-Modified" HTTP header.  If timestamp is<br />
omitted, current time is sent.</p>
<h2 id="http_send_content_type">bool http_send_content_type([string content_type = 'application/x-octetstream'])</h2>
<p>Sets the content type.</p>
<h2 id="http_send_content_disposition">bool http_send_content_disposition(string filename[, bool inline = false])</h2>
<p>Set the Content Disposition.  The Content-Disposition header is very useful<br />
if the data actually sent came from a file or something similar, that should<br />
be "saved" by the client/user (i.e. by browsers "Save as..." popup window).</p>
<h2 id="http_match_modified">bool http_match_modified([int timestamp[, for_range = false]])</h2>
<p>Matches the given timestamp against the clients "If-Modified-Since" resp.<br />
"If-Unmodified-Since" HTTP headers.</p>
<h2 id="http_match_etag">bool http_match_etag(string etag[, for_range = false])</h2>
<p>This matches the given ETag against the clients<br />
"If-Match" resp. "If-None-Match" HTTP headers.</p>
<h2 id="http_cache_last_modified">bool http_cache_last_modified([int timestamp_or_expires]])</h2>
<p>If timestamp_or_expires is greater than 0, it is handled as timestamp<br />
and will be sent as date of last modification.  If it is 0 or omitted,<br />
the current time will be sent as Last-Modified date.  If it's negative,<br />
it is handled as expiration time in seconds, which means that if the<br />
requested last modification date is not between the calculated timespan,<br />
the Last-Modified header is updated and the actual body will be sent.</p>
<h2 id="http_cache_etag">bool http_cache_etag([string etag])</h2>
<p>This function attempts to cache the HTTP body based on an ETag,<br />
either supplied or generated through calculation of the MD5<br />
checksum of the output (uses output buffering).<br />
<br />
If clients "If-None-Match" header matches the supplied/calculated<br />
ETag, the body is considered cached on the clients side and<br />
a "304 Not Modified" status code is issued.</p>
<h2 id="ob_etaghandler">string ob_etaghandler(string data, int mode)</h2>
<p>For use with ob_start().</p>
<h2 id="http_throttle">void http_throttle(double sec[, long bytes = 2097152])</h2>
<p>Use with http_send() API.<br />
<br />
Example:</p><pre><blockquote><code><span style="color: #000000"><br />
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #FF8000">// ~ 20 kbyte/s<br /># http_throttle(1, 20000);<br /># http_throttle(0.5, 10000);<br /># http_throttle(0.1, 2000);<br /></span><span style="color: #0000BB">http_send_file</span><span style="color: #007700">(</span><span style="color: #DD0000">'document.pdf'</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span><br />
</span><br />
</code></blockquote><br />
<br />
</pre></p>
<h2 id="http_redirect">void http_redirect([string url[, array params[, bool session,[ bool permanent]]]])</h2>
<p>Redirect to a given url.<br />
The supplied url will be expanded with http_absolute_uri(), the params array will<br />
be treated with http_build_query() and the session identification will be appended<br />
if session is true.<br />
<br />
Depending on permanent the redirection will be issued with a permanent<br />
("301 Moved Permanently") or a temporary ("302 Found") redirection<br />
status code.<br />
<br />
To be RFC compliant, "Redirecting to <a>URI</a>." will be displayed,<br />
if the client doesn't redirect immediatly.</p>
<h2 id="http_send_data">bool http_send_data(string data)</h2>
<p>Sends raw data with support for (multiple) range requests.</p>
<h2 id="http_send_file">bool http_send_file(string file)</h2>
<p>Sends a file with support for (multiple) range requests.</p>
<h2 id="http_send_stream">bool http_send_stream(resource stream)</h2>
<p>Sends an already opened stream with support for (multiple) range requests.</p>
<h2 id="http_chunked_decode">string http_chunked_decode(string encoded)</h2>
<p>This function decodes a string that was HTTP-chunked encoded.<br />
Returns false on failure.</p>
<h2 id="http_split_response">array http_split_response(string http_response)</h2>
<p>This function splits an HTTP response into an array with headers and the<br />
content body. The returned array may look simliar to the following example:</p><pre><blockquote><code><span style="color: #000000"><br />
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #007700">array(<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">0 </span><span style="color: #007700">=&gt; array(<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'Response Status' </span><span style="color: #007700">=&gt; </span><span style="color: #DD0000">'200 Ok'</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'Content-Type' </span><span style="color: #007700">=&gt; </span><span style="color: #DD0000">'text/plain'</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'Content-Language' </span><span style="color: #007700">=&gt; </span><span style="color: #DD0000">'en-US'<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">),<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">1 </span><span style="color: #007700">=&gt; </span><span style="color: #DD0000">"Hello World!"<br /></span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span><br />
</span><br />
</code></blockquote><br />
<br />
</pre></p>
<h2 id="http_parse_headers">array http_parse_headers(string header)</h2>
<p></p>
<h2 id="http_get_request_headers">array http_get_request_headers(void)</h2>
<p>Get a list of incoming HTTP headers.</p>
<h2 id="http_match_request_header">bool http_match_request_header(string header, string value[, bool match_case = false])</h2>
<p>Match an incoming HTTP header.</p>
<h2 id="http_get">string http_get(string url[, array options[, array &info]])</h2>
<p>Performs an HTTP GET request on the supplied url.<br />
<br />
The second parameter is expected to be an associative<br />
array where the following keys will be recognized:</p><pre> - redirect:         int, whether and how many redirects to follow<br />
 - unrestrictedauth: bool, whether to continue sending credentials on<br />
                     redirects to a different host<br />
 - proxyhost:        string, proxy host in "host[:port]" format<br />
 - proxyport:        int, use another proxy port as specified in proxyhost<br />
 - proxyauth:        string, proxy credentials in "user:pass" format<br />
 - proxyauthtype:    int, HTTP_AUTH_BASIC and/or HTTP_AUTH_NTLM<br />
 - httpauth:         string, http credentials in "user:pass" format<br />
 - httpauthtype:     int, HTTP_AUTH_BASIC, DIGEST and/or NTLM<br />
 - compress:         bool, whether to allow gzip/deflate content encoding<br />
                     (defaults to true)<br />
 - port:             int, use another port as specified in the url<br />
 - referer:          string, the referer to sends<br />
 - useragent:        string, the user agent to send<br />
                     (defaults to PECL::HTTP/version (PHP/version)))<br />
 - headers:          array, list of custom headers as associative array<br />
                     like array("header" => "value")<br />
 - cookies:          array, list of cookies as associative array<br />
                     like array("cookie" => "value")<br />
 - cookiestore:      string, path to a file where cookies are/will be stored<br />
 - resume:           int, byte offset to start the download from;<br />
                     if the server supports ranges<br />
 - maxfilesize:      int, maximum file size that should be downloaded;<br />
                     has no effect, if the size of the requested entity is not known<br />
 - lastmodified:     int, timestamp for If-(Un)Modified-Since header<br />
 - timeout:          int, seconds the request may take<br />
 - connecttimeout:   int, seconds the connect may take<br />
 - onprogress:       mixed, progress callback<br />
 - ondebug:          mixed, debug callback</pre><p>The optional third parameter will be filled with some additional information<br />
in form af an associative array, if supplied, like the following example:</p><pre><blockquote><code><span style="color: #000000"><br />
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #007700">array (<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'effective_url' </span><span style="color: #007700">=&gt; </span><span style="color: #DD0000">'http://localhost'</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'response_code' </span><span style="color: #007700">=&gt; </span><span style="color: #0000BB">403</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'total_time' </span><span style="color: #007700">=&gt; </span><span style="color: #0000BB">0.017</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'namelookup_time' </span><span style="color: #007700">=&gt; </span><span style="color: #0000BB">0.013</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'connect_time' </span><span style="color: #007700">=&gt; </span><span style="color: #0000BB">0.014</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'pretransfer_time' </span><span style="color: #007700">=&gt; </span><span style="color: #0000BB">0.014</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'size_upload' </span><span style="color: #007700">=&gt; </span><span style="color: #0000BB">0</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'size_download' </span><span style="color: #007700">=&gt; </span><span style="color: #0000BB">202</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'speed_download' </span><span style="color: #007700">=&gt; </span><span style="color: #0000BB">11882</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'speed_upload' </span><span style="color: #007700">=&gt; </span><span style="color: #0000BB">0</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'header_size' </span><span style="color: #007700">=&gt; </span><span style="color: #0000BB">145</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'request_size' </span><span style="color: #007700">=&gt; </span><span style="color: #0000BB">62</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'ssl_verifyresult' </span><span style="color: #007700">=&gt; </span><span style="color: #0000BB">0</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'filetime' </span><span style="color: #007700">=&gt; -</span><span style="color: #0000BB">1</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'content_length_download' </span><span style="color: #007700">=&gt; </span><span style="color: #0000BB">202</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'content_length_upload' </span><span style="color: #007700">=&gt; </span><span style="color: #0000BB">0</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'starttransfer_time' </span><span style="color: #007700">=&gt; </span><span style="color: #0000BB">0.017</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'content_type' </span><span style="color: #007700">=&gt; </span><span style="color: #DD0000">'text/html; charset=iso-8859-1'</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'redirect_time' </span><span style="color: #007700">=&gt; </span><span style="color: #0000BB">0</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'redirect_count' </span><span style="color: #007700">=&gt; </span><span style="color: #0000BB">0</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'private' </span><span style="color: #007700">=&gt; </span><span style="color: #DD0000">''</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'http_connectcode' </span><span style="color: #007700">=&gt; </span><span style="color: #0000BB">0</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'httpauth_avail' </span><span style="color: #007700">=&gt; </span><span style="color: #0000BB">0</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'proxyauth_avail' </span><span style="color: #007700">=&gt; </span><span style="color: #0000BB">0</span><span style="color: #007700">,<br />)<br /></span><span style="color: #0000BB">?&gt;</span><br />
</span><br />
</code></blockquote><br />
<br />
</pre></p>
<h2 id="http_head">string http_head(string url[, array options[, array &info]])</h2>
<p>Performs an HTTP HEAD request on the suppied url.<br />
Returns the HTTP response as string.<br />
See http_get() for a full list of available options.</p>
<h2 id="http_post_data">string http_post_data(string url, string data[, array options[, &info]])</h2>
<p>Performs an HTTP POST request, posting data.<br />
Returns the HTTP response as string.<br />
See http_get() for a full list of available options.</p>
<h2 id="http_post_fields">string http_post_fields(string url, array data[, array files[, array options[, array &info]]])</h2>
<p>Performs an HTTP POST request, posting www-form-urlencoded array data.<br />
Returns the HTTP response as string.<br />
See http_get() for a full list of available options.</p>
<h2 id="http_put_file">string http_put_file(string url, string file[, array options[, array &info]])</h2>
<p>Performs an HTTP PUT request, uploading file.<br />
Returns the HTTP response as string.<br />
See http_get() for a full list of available options.</p>
<h2 id="http_put_stream">string http_put_stream(string url, resource stream[, array options[, array &info]])</h2>
<p>Performs an HTTP PUT request, uploading stream.<br />
Returns the HTTP response as string.<br />
See http_get() for a full list of available options.</p>
<h2 id="http_request_method_register">long http_request_method_register(string method)</h2>
<p>Register a custom request method.</p>
<h2 id="http_request_method_unregister">bool http_request_method_unregister(mixed method)</h2>
<p>Unregister a previously registered custom request method.</p>
<h2 id="http_request_method_exists">long http_request_method_exists(mixed method)</h2>
<p>Check if a request method is registered (or available by default).</p>
<h2 id="http_request_method_name">string http_request_method_name(long method)</h2>
<p>Get the literal string representation of a standard or registered request method.</p>
<h2 id="http_auth_basic">bool http_auth_basic(string user, string pass[, string realm = "Restricted"])</h2>
<p>Example:</p><pre><blockquote><code><span style="color: #000000"><br />
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #007700">if (!</span><span style="color: #0000BB">http_auth_basic</span><span style="color: #007700">(</span><span style="color: #DD0000">'mike'</span><span style="color: #007700">, </span><span style="color: #DD0000">'s3c|r3t'</span><span style="color: #007700">)) {<br />&nbsp;&nbsp;&nbsp;&nbsp;die(</span><span style="color: #DD0000">'&lt;h1&gt;Authorization failed!&lt;/h1&gt;'</span><span style="color: #007700">);<br />}<br /></span><span style="color: #0000BB">?&gt;</span><br />
</span><br />
</code></blockquote><br />
<br />
</pre></p>
<h2 id="http_auth_basic_cb">bool http_auth_basic_cb(mixed callback[, string realm = "Restricted"])</h2>
<p>Example:</p><pre><blockquote><code><span style="color: #000000"><br />
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #007700">function </span><span style="color: #0000BB">auth_cb</span><span style="color: #007700">(</span><span style="color: #0000BB">$user</span><span style="color: #007700">, </span><span style="color: #0000BB">$pass</span><span style="color: #007700">)<br />{<br />&nbsp;&nbsp;&nbsp;&nbsp;global </span><span style="color: #0000BB">$db</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$query </span><span style="color: #007700">= </span><span style="color: #DD0000">'SELECT pass FROM users WHERE user='</span><span style="color: #007700">. </span><span style="color: #0000BB">$db</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">quoteSmart</span><span style="color: #007700">(</span><span style="color: #0000BB">$user</span><span style="color: #007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;if (</span><span style="color: #0000BB">strlen</span><span style="color: #007700">(</span><span style="color: #0000BB">$realpass </span><span style="color: #007700">= </span><span style="color: #0000BB">$db</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getOne</span><span style="color: #007700">(</span><span style="color: #0000BB">$query</span><span style="color: #007700">)) {<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return </span><span style="color: #0000BB">$pass </span><span style="color: #007700">=== </span><span style="color: #0000BB">$realpass</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;}<br />&nbsp;&nbsp;&nbsp;&nbsp;return </span><span style="color: #0000BB">false</span><span style="color: #007700">;<br />}<br />if (!</span><span style="color: #0000BB">http_auth_basic_cb</span><span style="color: #007700">(</span><span style="color: #DD0000">'auth_cb'</span><span style="color: #007700">)) {<br />&nbsp;&nbsp;&nbsp;&nbsp;die(</span><span style="color: #DD0000">'&lt;h1&gt;Authorization failed&lt;/h1&gt;'</span><span style="color: #007700">);<br />}<br /></span><span style="color: #0000BB">?&gt;</span><br />
</span><br />
</code></blockquote><br />
<br />
</pre></p>
<h2 id="http_build_query">string http_build_query(mixed formdata [, string prefix[, string arg_separator]])</h2>
<p>Generates a form-encoded query string from an associative array or object.</p>
<hr noshade>
<h1>http_methods.c</h1>
<h2 id="HttpResponse" class="o">HttpResponse</h2>
<h3 id="HttpResponse___construct">void HttpResponse::__construct(bool cache, bool gzip)</h3>
<p>Instantiates a new HttpResponse object, which can be used to send<br />
any data/resource/file to an HTTP client with caching and multiple<br />
ranges/resuming support.<br />
<br />
NOTE: GZIPping is not implemented yet.</p>
<h3 id="HttpResponse_setCache">bool HttpResponse::setCache(bool cache)</h3>
<p>Whether it sould be attempted to cache the entitity.<br />
This will result in necessary caching headers and checks of clients<br />
"If-Modified-Since" and "If-None-Match" headers.  If one of those headers<br />
matches a "304 Not Modified" status code will be issued.<br />
<br />
NOTE: If you're using sessions, be shure that you set session.cache_limiter<br />
to something more appropriate than "no-cache"!</p>
<h3 id="HttpResponse_getCache">bool HttpResponse::getCache()</h3>
<p>Get current caching setting.</p>
<h3 id="HttpResponse_setGzip">bool HttpResponse::setGzip(bool gzip)</h3>
<p>Enable on-thy-fly gzipping of the sent entity. NOT IMPLEMENTED YET.</p>
<h3 id="HttpResponse_getGzip">bool HttpResponse::getGzip()</h3>
<p>Get current gzipping setting.</p>
<h3 id="HttpResponse_setCacheControl">bool HttpResponse::setCacheControl(string control[, bool raw = false])</h3>
<p>Set a custom cache-control header, usually being "private" or "public";  if<br />
$raw is set to true the header will be sent as-is.</p>
<h3 id="HttpResponse_getCacheControl">string HttpResponse::getCacheControl()</h3>
<p>Get current Cache-Control header setting.</p>
<h3 id="HttpResponse_setContentType">bool HttpResponse::setContentType(string content_type)</h3>
<p>Set the content-type of the sent entity.</p>
<h3 id="HttpResponse_getContentType">string HttpResponse::getContentType()</h3>
<p>Get current Content-Type header setting.</p>
<h3 id="HttpResponse_setContentDisposition">bool HttpResponse::setContentDisposition(string filename[, bool inline = false])</h3>
<p>Set the Content-Disposition of the sent entity.  This setting aims to suggest<br />
the receiveing user agent how to handle the sent entity;  usually the client<br />
will show the user a "Save As..." popup.</p>
<h3 id="HttpResponse_getContentDisposition">array HttpResponse::getContentDisposition()</h3>
<p>Get current Content-Disposition setting.<br />
Will return an associative array like:</p><pre>array(<br />
    'filename' => 'foo.bar',<br />
    'inline'   => false<br />
)<br />
</pre></p>
<h3 id="HttpResponse_setETag">bool HttpResponse::setETag(string etag)</h3>
<p>Set a custom ETag.  Use this only if you know what you're doing.</p>
<h3 id="HttpResponse_getETag">string HttpResponse::getETag()</h3>
<p>Get the previously set custom ETag.</p>
<h3 id="HttpResponse_setThrottleDelay">void HttpResponse::setThrottleDelay(double seconds)</h3>
<p></p>
<h3 id="HttpResponse_getThrottleDelay">double HttpResponse::getThrottleDelay()</h3>
<p></p>
<h3 id="HttpResponse_setSendBuffersize">void HttpResponse::setSendBuffersize(long bytes)</h3>
<p></p>
<h3 id="HttpResponse_getSendBuffersize">long HttpResponse::getSendBuffersize()</h3>
<p></p>
<h3 id="HttpResponse_setData">bool HttpResponse::setData(string data)</h3>
<p>Set the data to be sent.</p>
<h3 id="HttpResponse_getData">string HttpResponse::getData()</h3>
<p>Get the previously set data to be sent.</p>
<h3 id="HttpResponse_setStream">bool HttpResponse::setStream(resource stream)</h3>
<p>Set the resource to be sent.</p>
<h3 id="HttpResponse_getStream">resource HttpResponse::getStream()</h3>
<p>Get the previously set resource to be sent.</p>
<h3 id="HttpResponse_setFile">bool HttpResponse::setFile(string file)</h3>
<p>Set the file to be sent.</p>
<h3 id="HttpResponse_getFile">string HttpResponse::getFile()</h3>
<p>Get the previously set file to be sent.</p>
<h3 id="HttpResponse_send">bool HttpResponse::send([bool clean_ob = true])</h3>
<p>Finally send the entity.<br />
<br />
Example:</p><pre><blockquote><code><span style="color: #000000"><br />
<span style="color: #0000BB">&lt;?php<br />$r </span><span style="color: #007700">= new </span><span style="color: #0000BB">HttpResponse</span><span style="color: #007700">(</span><span style="color: #0000BB">true</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$r</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">setFile</span><span style="color: #007700">(</span><span style="color: #DD0000">'../hidden/contract.pdf'</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$r</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">setContentType</span><span style="color: #007700">(</span><span style="color: #DD0000">'application/pdf'</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$r</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">send</span><span style="color: #007700">();<br /></span><span style="color: #0000BB">?&gt;</span><br />
</span><br />
</code></blockquote><br />
<br />
</pre></p>
<h2 id="HttpMessage" class="o">HttpMessage</h2>
<h3 id="HttpMessage___construct">void HttpMessage::__construct([string message])</h3>
<p>Instantiate a new HttpMessage object.</p>
<h3 id="HttpMessage_fromString">static HttpMessage HttpMessage::fromString(string raw_message)</h3>
<p>Create an HttpMessage object from a string.</p>
<h3 id="HttpMessage_getBody">string HttpMessage::getBody()</h3>
<p>Get the body of the parsed Message.</p>
<h3 id="HttpMessage_getHeaders">array HttpMessage::getHeaders()</h3>
<p>Get Message Headers.</p>
<h3 id="HttpMessage_setHeaders">void HttpMessage::setHeaders(array headers)</h3>
<p>Sets new headers.</p>
<h3 id="HttpMessage_addHeaders">void HttpMessage::addHeaders(array headers[, bool append = false])</h3>
<p>Add headers. If append is true, headers with the same name will be separated, else overwritten.</p>
<h3 id="HttpMessage_getType">long HttpMessage::getType()</h3>
<p>Get Message Type. (HTTP_MSG_NONE|HTTP_MSG_REQUEST|HTTP_MSG_RESPONSE)</p>
<h3 id="HttpMessage_setType">void HttpMessage::setType(long type)</h3>
<p>Set Message Type. (HTTP_MSG_NONE|HTTP_MSG_REQUEST|HTTP_MSG_RESPONSE)</p>
<h3 id="HttpMessage_getResponseCode">long HttpMessage::getResponseCode()</h3>
<p>Get the Response Code of the Message.</p>
<h3 id="HttpMessage_setResponseCode">bool HttpMessage::setResponseCode(long code)</h3>
<p>Set the response code of an HTTP Response Message.<br />
Returns false if the Message is not of type HTTP_MSG_RESPONSE,<br />
or if the response code is out of range (100-510).</p>
<h3 id="HttpMessage_getRequestMethod">string HttpMessage::getRequestMethod()</h3>
<p>Get the Request Method of the Message.<br />
Returns false if the Message is not of type HTTP_MSG_REQUEST.</p>
<h3 id="HttpMessage_setRequestMethod">bool HttpMessage::setRequestMethod(string method)</h3>
<p>Set the Request Method of the HTTP Message.<br />
Returns false if the Message is not of type HTTP_MSG_REQUEST.</p>
<h3 id="HttpMessage_getRequestUri">string HttpMessage::getRequestUri()</h3>
<p>Get the Request URI of the Message.</p>
<h3 id="HttpMessage_setRequestUri">bool HttpMessage::setRequestUri(string URI)</h3>
<p>Set the Request URI of the HTTP Message.<br />
Returns false if the Message is not of type HTTP_MSG_REQUEST,<br />
or if paramtere URI was empty.</p>
<h3 id="HttpMessage_getHttpVersion">string HttpMessage::getHttpVersion()</h3>
<p>Get the HTTP Protocol Version of the Message.</p>
<h3 id="HttpMessage_setHttpVersion">bool HttpMessage::setHttpVersion(string version)</h3>
<p>Set the HTTP Protocol version of the Message.<br />
Returns false if version is invalid (1.0 and 1.1).</p>
<h3 id="HttpMessage_getParentMessage">HttpMessage HttpMessage::getParentMessage()</h3>
<p>Get parent Message.</p>
<h3 id="HttpMessage_send">bool HttpMessage::send()</h3>
<p>Send the Message according to its type as Response or Request.</p>
<h3 id="HttpMessage_toString">string HttpMessage::toString([bool include_parent = true])</h3>
<p>Get the string representation of the Message.</p>
<h2 id="HttpRequest" class="o">HttpRequest</h2>
<h3 id="HttpRequest___construct">void HttpRequest::__construct([string url[, long request_method = HTTP_GET]])</h3>
<p>Instantiate a new HttpRequest object which can be used to issue HEAD, GET<br />
and POST (including posting files) HTTP requests.</p>
<h3 id="HttpRequest___destruct">void HttpRequest::__destruct()</h3>
<p>Destroys the HttpRequest object.</p>
<h3 id="HttpRequest_setOptions">bool HttpRequest::setOptions(array options)</h3>
<p>Set the request options to use.  See http_get() for a full list of available options.</p>
<h3 id="HttpRequest_getOptions">array HttpRequest::getOptions()</h3>
<p>Get current set options.</p>
<h3 id="HttpRequest_unsetOptions">void HttpRequest::unsetOptions()</h3>
<p>Unset all options/headers/cookies.</p>
<h3 id="HttpRequest_setSslOptions">bool HttpRequest::setSslOptions(array options)</h3>
<p>Set additional SSL options.</p>
<h3 id="HttpRequest_getSslOptions">array HttpRequest::getSslOtpions()</h3>
<p>Get previously set SSL options.</p>
<h3 id="HttpRequest_unsetSslOptions">void HttpRequest::unsetSslOptions()</h3>
<p>Unset previously set SSL options.</p>
<h3 id="HttpRequest_addHeaders">bool HttpRequest::addHeaders(array headers)</h3>
<p>Add request header name/value pairs.</p>
<h3 id="HttpRequest_getHeaders">array HttpRequest::getHeaders()</h3>
<p>Get previously set request headers.</p>
<h3 id="HttpRequest_unsetHeaders">void HttpRequest::unsetHeaders()</h3>
<p>Unset previously set request headers.</p>
<h3 id="HttpRequest_addCookies">bool HttpRequest::addCookies(array cookies)</h3>
<p>Add cookies.</p>
<h3 id="HttpRequest_getCookies">array HttpRequest::getCookies()</h3>
<p>Get previously set cookies.</p>
<h3 id="HttpRequest_unsetCookies">void HttpRequest::unsetCookies()</h3>
<p></p>
<h3 id="HttpRequest_setURL">bool HttpRequest::setURL(string url)</h3>
<p>Set the request URL.</p>
<h3 id="HttpRequest_getURL">string HttpRequest::getUrl()</h3>
<p>Get the previously set request URL.</p>
<h3 id="HttpRequest_setMethod">bool HttpRequest::setMethod(long request_method)</h3>
<p>Set the request methods; one of the <tt>HTTP_HEAD</tt>, <tt>HTTP_GET</tt> or<br />
<tt>HTTP_POST</tt> constants.</p>
<h3 id="HttpRequest_getMethod">long HttpRequest::getMethod()</h3>
<p>Get the previously set request method.</p>
<h3 id="HttpRequest_setContentType">bool HttpRequest::setContentType(string content_type)</h3>
<p>Set the content type the post request should have.<br />
Use this only if you know what you're doing.</p>
<h3 id="HttpRequest_getContentType">string HttpRequest::getContentType()</h3>
<p>Get the previously content type.</p>
<h3 id="HttpRequest_setQueryData">bool HttpRequest::setQueryData(mixed query_data)</h3>
<p>Set the URL query parameters to use.<br />
Overwrites previously set query parameters.<br />
Affects any request types.</p>
<h3 id="HttpRequest_getQueryData">string HttpRequest::getQueryData()</h3>
<p>Get the current query data in form of an urlencoded query string.</p>
<h3 id="HttpRequest_addQueryData">bool HttpRequest::addQueryData(array query_params)</h3>
<p>Add parameters to the query parameter list.<br />
Affects any request type.</p>
<h3 id="HttpRequest_unsetQueryData">void HttpRequest::unsetQueryData()</h3>
<p>Clean the query parameters.<br />
Affects any request type.</p>
<h3 id="HttpRequest_addPostFields">bool HttpRequest::addPostFields(array post_data)</h3>
<p>Adds POST data entries.<br />
Affects only POST requests.</p>
<h3 id="HttpRequest_setPostFields">bool HttpRequest::setPostFields(array post_data)</h3>
<p>Set the POST data entries.<br />
Overwrites previously set POST data.<br />
Affects only POST requests.</p>
<h3 id="HttpRequest_getPostFields">array HttpRequest::getPostFields()</h3>
<p>Get previously set POST data.</p>
<h3 id="HttpRequest_unsetPostFields">void HttpRequest::unsetPostFields()</h3>
<p>Clean POST data entires.<br />
Affects only POST requests.</p>
<h3 id="HttpRequest_addPostFile">bool HttpRequest::addPostFile(string name, string file[, string content_type = "application/x-octetstream"])</h3>
<p>Add a file to the POST request.<br />
Affects only POST requests.</p>
<h3 id="HttpRequest_setPostFiles">bool HttpRequest::setPostFiles()</h3>
<p>Set files to post.<br />
Overwrites previously set post files.<br />
Affects only POST requests.</p>
<h3 id="HttpRequest_getPostFiles">array HttpRequest::getPostFiles()</h3>
<p>Get all previously added POST files.</p>
<h3 id="HttpRequest_unsetPostFiles">void HttpRequest::unsetPostFiles()</h3>
<p>Unset the POST files list.<br />
Affects only POST requests.</p>
<h3 id="HttpRequest_setPutFile">bool HttpRequest::SetPutFile(string file)</h3>
<p>Set file to put.<br />
Affects only PUT requests.</p>
<h3 id="HttpRequest_getPutFile">string HttpRequest::getPutFile()</h3>
<p>Get previously set put file.</p>
<h3 id="HttpRequest_unsetPutFile">void HttpRequest::unsetPutFile()</h3>
<p>Unset file to put.<br />
Affects only PUT requests.</p>
<h3 id="HttpRequest_getResponseData">array HttpRequest::getResponseData()</h3>
<p>Get all response data after the request has been sent.</p>
<h3 id="HttpRequest_getResponseHeader">mixed HttpRequest::getResponseHeader([string name])</h3>
<p>Get response header(s) after the request has been sent.</p>
<h3 id="HttpRequest_getResponseCookie">array HttpRequest::getResponseCookie([string name])</h3>
<p>Get response cookie(s) after the request has been sent.</p>
<h3 id="HttpRequest_getResponseBody">string HttpRequest::getResponseBody()</h3>
<p>Get the response body after the request has been sent.</p>
<h3 id="HttpRequest_getResponseCode">int HttpRequest::getResponseCode()</h3>
<p>Get the response code after the request has been sent.</p>
<h3 id="HttpRequest_getResponseInfo">array HttpRequest::getResponseInfo([string name])</h3>
<p>Get response info after the request has been sent.<br />
See http_get() for a full list of returned info.</p>
<h3 id="HttpRequest_getResponseMessage">HttpMessage HttpRequest::getResponseMessage()</h3>
<p>Get the full response as HttpMessage object.</p>
<h3 id="HttpRequest_send">bool HttpRequest::send()</h3>
<p>Send the HTTP request.<br />
<br />
GET example:</p><pre><blockquote><code><span style="color: #000000"><br />
<span style="color: #0000BB">&lt;?php<br />$r </span><span style="color: #007700">= new </span><span style="color: #0000BB">HttpRequest</span><span style="color: #007700">(</span><span style="color: #DD0000">'http://example.com/feed.rss'</span><span style="color: #007700">, </span><span style="color: #0000BB">HTTP_GET</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$r</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">setOptions</span><span style="color: #007700">(array(</span><span style="color: #DD0000">'lastmodified' </span><span style="color: #007700">=&gt; </span><span style="color: #0000BB">filemtime</span><span style="color: #007700">(</span><span style="color: #DD0000">'local.rss'</span><span style="color: #007700">)));<br /></span><span style="color: #0000BB">$r</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">addQueryData</span><span style="color: #007700">(array(</span><span style="color: #DD0000">'category' </span><span style="color: #007700">=&gt; </span><span style="color: #0000BB">3</span><span style="color: #007700">));<br />try {<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$r</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">send</span><span style="color: #007700">();<br />&nbsp;&nbsp;&nbsp;&nbsp;if (</span><span style="color: #0000BB">$r</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getResponseCode</span><span style="color: #007700">() == </span><span style="color: #0000BB">200</span><span style="color: #007700">) {<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">file_put_contents</span><span style="color: #007700">(</span><span style="color: #DD0000">'local.rss'</span><span style="color: #007700">, </span><span style="color: #0000BB">$r</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getResponseBody</span><span style="color: #007700">());<br />&nbsp;&nbsp;&nbsp;}<br />} catch (</span><span style="color: #0000BB">HttpException $ex</span><span style="color: #007700">) {<br />&nbsp;&nbsp;&nbsp;&nbsp;echo </span><span style="color: #0000BB">$ex</span><span style="color: #007700">;<br />}<br /></span><span style="color: #0000BB">?&gt;</span><br />
</span><br />
</code></blockquote></pre><p>POST example:</p><pre><blockquote><code><span style="color: #000000"><br />
<span style="color: #0000BB">&lt;?php<br />$r </span><span style="color: #007700">= new </span><span style="color: #0000BB">HttpRequest</span><span style="color: #007700">(</span><span style="color: #DD0000">'http://example.com/form.php'</span><span style="color: #007700">, </span><span style="color: #0000BB">HTTP_POST</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$r</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">setOptions</span><span style="color: #007700">(array(</span><span style="color: #DD0000">'cookies' </span><span style="color: #007700">=&gt; array(</span><span style="color: #DD0000">'lang' </span><span style="color: #007700">=&gt; </span><span style="color: #DD0000">'de'</span><span style="color: #007700">)));<br /></span><span style="color: #0000BB">$r</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">addpostFields</span><span style="color: #007700">(array(</span><span style="color: #DD0000">'user' </span><span style="color: #007700">=&gt; </span><span style="color: #DD0000">'mike'</span><span style="color: #007700">, </span><span style="color: #DD0000">'pass' </span><span style="color: #007700">=&gt; </span><span style="color: #DD0000">'s3c|r3t'</span><span style="color: #007700">));<br /></span><span style="color: #0000BB">$r</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">addPostFile</span><span style="color: #007700">(</span><span style="color: #DD0000">'image'</span><span style="color: #007700">, </span><span style="color: #DD0000">'profile.jpg'</span><span style="color: #007700">, </span><span style="color: #DD0000">'image/jpeg'</span><span style="color: #007700">);<br />if (</span><span style="color: #0000BB">$r</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">send</span><span style="color: #007700">()) {<br />&nbsp;&nbsp;&nbsp;&nbsp;echo </span><span style="color: #0000BB">$r</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getResponseBody</span><span style="color: #007700">();<br />}<br /></span><span style="color: #0000BB">?&gt;</span><br />
</span><br />
</code></blockquote><br />
<br />
</pre></p>
<hr noshade>
    <p><b>Generated at: Mon,  6 Jun 2005 13:44:11 +0200</b></p>
</body>
</html>

