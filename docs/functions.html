<html>
<head><title>Function Summary</title>
<style>body { font-size: 80%; font-family: sans-serif; } h2 { color: #339; } pre { font-size: 1.2em; } pre br { display: none; } pre code br { display: block; } </style></head>
<body>
<h1>http.c</h1>
<h2 id="http_date">string http_date([int timestamp])</h2>
<p>This function returns a valid HTTP date regarding RFC 822/1123<br />
looking like: "Wed, 22 Dec 2004 11:34:47 GMT"</p>
<h2 id="http_absolute_uri">string http_absolute_uri(string url[, string proto])</h2>
<p>This function returns an absolute URI constructed from url.<br />
If the url is already abolute but a different proto was supplied,<br />
only the proto part of the URI will be updated.  If url has no<br />
path specified, the path of the current REQUEST_URI will be taken.<br />
The host will be taken either from the Host HTTP header of the client<br />
the SERVER_NAME or just localhost if prior are not available.</p><p>Some examples:<br />
<pre><br />
url = "page.php"                    => http://www.example.com/current/path/page.php<br />
url = "/page.php"                   => http://www.example.com/page.php<br />
url = "/page.php", proto = "https"  => https://www.example.com/page.php<br />
</pre></p>
<h2 id="http_negotiate_language">string http_negotiate_language(array supported[, string default = 'en-US'])</h2>
<p>This function negotiates the clients preferred language based on its<br />
Accept-Language HTTP header.  It returns the negotiated language or<br />
the default language if none match.</p><p>The qualifier is recognized and languages without qualifier are rated highest.</p><p>The supported parameter is expected to be an array having<br />
the supported languages as array values.</p><p>Example:<br />
<pre><br />
<code><font color="#000000"><br />
<font color="#0000BB">&lt;?php<br />$langs </font><font color="#007700">= array(<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#DD0000">'en-US'</font><font color="#007700">,</font><font color="#FF8000">// default<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#DD0000">'fr'</font><font color="#007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#DD0000">'fr-FR'</font><font color="#007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#DD0000">'de'</font><font color="#007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#DD0000">'de-DE'</font><font color="#007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#DD0000">'de-AT'</font><font color="#007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#DD0000">'de-CH'</font><font color="#007700">,<br />);<br />include </font><font color="#DD0000">'./langs/'</font><font color="#007700">. </font><font color="#0000BB">http_negotiate_language</font><font color="#007700">(</font><font color="#0000BB">$langs</font><font color="#007700">) .</font><font color="#DD0000">'.php'</font><font color="#007700">;<br /></font><font color="#0000BB">?&gt;</font><br />
</font><br />
</code><br />
</pre></p>
<h2 id="http_negotiate_charset">string http_negotiate_charset(array supported[, string default = 'iso-8859-1'])</h2>
<p>This function negotiates the clients preferred charset based on its<br />
Accept-Charset HTTP header.  It returns the negotiated charset or<br />
the default charset if none match.</p><p>The qualifier is recognized and charset without qualifier are rated highest.</p><p>The supported parameter is expected to be an array having<br />
the supported charsets as array values.</p><p>Example:<br />
<pre><br />
<code><font color="#000000"><br />
<font color="#0000BB">&lt;?php<br />$charsets </font><font color="#007700">= array(<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#DD0000">'iso-8859-1'</font><font color="#007700">, </font><font color="#FF8000">// default<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#DD0000">'iso-8859-2'</font><font color="#007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#DD0000">'iso-8859-15'</font><font color="#007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#DD0000">'utf-8'<br /></font><font color="#007700">);<br /></font><font color="#0000BB">$pref </font><font color="#007700">= </font><font color="#0000BB">http_negotiate_charset</font><font color="#007700">(</font><font color="#0000BB">$charsets</font><font color="#007700">);<br />if (!</font><font color="#0000BB">strcmp</font><font color="#007700">(</font><font color="#0000BB">$pref</font><font color="#007700">, </font><font color="#DD0000">'iso-8859-1'</font><font color="#007700">)) {<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000BB">iconv_set_encoding</font><font color="#007700">(</font><font color="#DD0000">'internal_encoding'</font><font color="#007700">, </font><font color="#DD0000">'iso-8859-1'</font><font color="#007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000BB">iconv_set_encoding</font><font color="#007700">(</font><font color="#DD0000">'output_encoding'</font><font color="#007700">, </font><font color="#0000BB">$pref</font><font color="#007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000BB">ob_start</font><font color="#007700">(</font><font color="#DD0000">'ob_iconv_handler'</font><font color="#007700">);<br />}<br /></font><font color="#0000BB">?&gt;</font><br />
</font><br />
</code><br />
</pre></p>
<h2 id="http_send_status">bool http_send_status(int status)</h2>
<p>Send HTTP status code.</p>
<h2 id="http_send_last_modified">bool http_send_last_modified([int timestamp])</h2>
<p>This converts the given timestamp to a valid HTTP date and<br />
sends it as "Last-Modified" HTTP header.  If timestamp is<br />
omitted, current time is sent.</p>
<h2 id="http_match_modified">bool http_match_modified([int timestamp])</h2>
<p>Matches the given timestamp against the clients "If-Modified-Since" resp.<br />
"If-Unmodified-Since" HTTP headers.</p>
<h2 id="http_match_etag">bool http_match_etag(string etag)</h2>
<p>This matches the given ETag against the clients<br />
"If-Match" resp. "If-None-Match" HTTP headers.</p>
<h2 id="http_cache_last_modified">bool http_cache_last_modified([int timestamp_or_expires]])</h2>
<p>If timestamp_or_exires is greater than 0, it is handled as timestamp<br />
and will be sent as date of last modification.  If it is 0 or omitted,<br />
the current time will be sent as Last-Modified date.  If it's negative,<br />
it is handled as expiration time in seconds, which means that if the<br />
requested last modification date is not between the calculated timespan,<br />
the Last-Modified header is updated and the actual body will be sent.</p>
<h2 id="http_cache_etag">bool http_cache_etag([string etag])</h2>
<p>This function attempts to cache the HTTP body based on an ETag,<br />
either supplied or generated through calculation of the MD5<br />
checksum of the output (uses output buffering).</p><p>If clients "If-None-Match" header matches the supplied/calculated<br />
ETag, the body is considered cached on the clients side and<br />
a "304 Not Modified" status code is issued.</p>
<h2 id="http_redirect">void http_redirect([string url[, array params[, bool session,[ bool permanent]]]])</h2>
<p>Redirect to a given url.<br />
The supplied url will be expanded with http_absolute_uri(), the params array will<br />
be treated with http_build_query() and the session identification will be appended<br />
if session is true.</p><p>Depending on permanent the redirection will be issued with a permanent<br />
("301 Moved Permanently") or a temporary ("302 Found") redirection<br />
status code.</p><p>To be RFC compliant, "Redirecting to <a>URI</a>." will be displayed,<br />
if the client doesn't redirect immediatly.</p>
<h2 id="http_send_data">bool http_send_data(string data)</h2>
<p>Sends raw data with support for (multiple) range requests.</p>
<h2 id="http_send_file">bool http_send_file(string file)</h2>
<p>Sends a file with support for (multiple) range requests.</p>
<h2 id="http_send_stream">bool http_send_stream(resource stream)</h2>
<p>Sends an already opened stream with support for (multiple) range requests.</p>
<h2 id="http_content_type">bool http_content_type([string content_type = 'application/x-octetstream'])</h2>
<p>Sets the content type.</p>
<h2 id="http_content_disposition">bool http_content_disposition(string filename[, bool inline = false])</h2>
<p>Set the Content Disposition.  The Content-Disposition header is very useful<br />
if the data actually sent came from a file or something similar, that should<br />
be "saved" by the client/user (i.e. by browsers "Save as..." popup window).</p>
<h2 id="http_chunked_decode">string http_chunked_decode(string encoded)</h2>
<p>This function decodes a string that was HTTP-chunked encoded.<br />
Returns false on failure.</p>
<h2 id="http_split_response">array http_split_response(string http_response)</h2>
<p>This function splits an HTTP response into an array with headers and the<br />
content body. The returned array may look simliar to the following example:</p><p><pre><br />
array(<br />
0 => array(<br />
'Status' => '200 Ok',<br />
'Content-Type' => 'text/plain',<br />
'Content-Language' => 'en-US'<br />
),<br />
1 => "Hello World!"<br />
);<br />
</pre></p>
<h2 id="http_parse_headers">array http_parse_headers(string header) */</h2>
<p></p>
<h2 id="http_get">string http_get(string url[, array options[, array &info]])</h2>
<p>Performs an HTTP GET request on the supplied url.</p><p>The second parameter is expected to be an associative<br />
array where the following keys will be recognized:<br />
<pre><br />
- redirect:         int, whether and how many redirects to follow<br />
- unrestrictedauth: bool, whether to continue sending credentials on<br />
redirects to a different host<br />
- proxyhost:        string, proxy host in "host[:port]" format<br />
- proxyport:        int, use another proxy port as specified in proxyhost<br />
- proxyauth:        string, proxy credentials in "user:pass" format<br />
- proxyauthtype:    int, HTTP_AUTH_BASIC and/or HTTP_AUTH_NTLM<br />
- httpauth:         string, http credentials in "user:pass" format<br />
- httpauthtype:     int, HTTP_AUTH_BASIC, DIGEST and/or NTLM<br />
- compress:         bool, whether to allow gzip/deflate content encoding<br />
(defaults to true)<br />
- port:             int, use another port as specified in the url<br />
- referer:          string, the referer to sends<br />
- useragent:        string, the user agent to send<br />
(defaults to PECL::HTTP/version (PHP/version)))<br />
- headers:          array, list of custom headers as associative array<br />
like array("header" => "value")<br />
- cookies:          array, list of cookies as associative array<br />
like array("cookie" => "value")<br />
- cookiestore:      string, path to a file where cookies are/will be stored<br />
</pre></p><p>The optional third parameter will be filled with some additional information<br />
in form af an associative array, if supplied (don't forget to initialize it<br />
with NULL or array()).</p>
<h2 id="http_head">string http_head(string url[, array options[, array &info]])</h2>
<p>Performs an HTTP HEAD request on the suppied url.<br />
Returns the HTTP response as string.<br />
See http_get() for a full list of available options.</p>
<h2 id="http_post_data">string http_post_data(string url, string data[, array options[, &info]])</h2>
<p>Performs an HTTP POST request, posting data.<br />
Returns the HTTP response as string.<br />
See http_get() for a full list of available options.</p>
<h2 id="http_post_array">string http_post_array(string url, array data[, array options[, array &info]])</h2>
<p>Performs an HTTP POST request, posting www-form-urlencoded array data.<br />
Returns the HTTP response as string.<br />
See http_get() for a full list of available options.</p>
<h2 id="http_auth_basic">bool http_auth_basic(string user, string pass[, string realm = "Restricted"])</h2>
<p>Example:<br />
<pre><br />
<code><font color="#000000"><br />
<font color="#0000BB">&lt;?php<br /></font><font color="#007700">if (!</font><font color="#0000BB">http_auth_basic</font><font color="#007700">(</font><font color="#DD0000">'mike'</font><font color="#007700">, </font><font color="#DD0000">'s3c|r3t'</font><font color="#007700">)) {<br />die(</font><font color="#DD0000">'&lt;h1&gt;Authorization failed!&lt;/h1&gt;'</font><font color="#007700">);<br />}<br /></font><font color="#0000BB">?&gt;</font><br />
</font><br />
</code><br />
</pre></p>
<h2 id="http_auth_basic_cb">bool http_auth_basic_cb(mixed callback[, string realm = "Restricted"])</h2>
<p>Example:<br />
<pre><br />
<code><font color="#000000"><br />
<font color="#0000BB">&lt;?php<br /></font><font color="#007700">function </font><font color="#0000BB">auth_cb</font><font color="#007700">(</font><font color="#0000BB">$user</font><font color="#007700">, </font><font color="#0000BB">$pass</font><font color="#007700">)<br />{<br />global </font><font color="#0000BB">$db</font><font color="#007700">;<br /></font><font color="#0000BB">$query </font><font color="#007700">= </font><font color="#DD0000">'SELECT pass FROM users WHERE user='</font><font color="#007700">. </font><font color="#0000BB">$db</font><font color="#007700">-&gt;</font><font color="#0000BB">quoteSmart</font><font color="#007700">(</font><font color="#0000BB">$user</font><font color="#007700">);<br />if (</font><font color="#0000BB">strlen</font><font color="#007700">(</font><font color="#0000BB">$realpass </font><font color="#007700">= </font><font color="#0000BB">$db</font><font color="#007700">-&gt;</font><font color="#0000BB">getOne</font><font color="#007700">(</font><font color="#0000BB">$query</font><font color="#007700">)) {<br />return </font><font color="#0000BB">$pass </font><font color="#007700">=== </font><font color="#0000BB">$realpass</font><font color="#007700">;<br />}<br />return </font><font color="#0000BB">false</font><font color="#007700">;<br />}<br /><br />if (!</font><font color="#0000BB">http_auth_basic_cb</font><font color="#007700">(</font><font color="#DD0000">'auth_cb'</font><font color="#007700">)) {<br />die(</font><font color="#DD0000">'&lt;h1&gt;Authorization failed&lt;/h1&gt;'</font><font color="#007700">);<br />}<br /></font><font color="#0000BB">?&gt;</font><br />
</font><br />
</code><br />
</pre></p>
<hr noshade><p><b> Generated at: Thu, 10 Feb 2005 19:51:45 +0100</b></p>
</body>
</html>
